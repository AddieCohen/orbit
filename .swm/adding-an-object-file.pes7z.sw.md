---
id: pes7z
name: Adding an Object File
file_version: 1.0.2
app_version: 0.9.4-5
file_blobs:
  src/ObjectUtils/CoffFile.cpp: c824b572f5e93e7795ba5d135b4b108b74c525bd
  src/ObjectUtils/include/ObjectUtils/ObjectFile.h: dbcaa64232999a8520f08f069a87876c7cd9a93e
  src/ObjectUtils/include/ObjectUtils/CoffFile.h: d203d9adeb9f7dc9e8c6d0e3f199c7734b222428
  src/ObjectUtils/ElfFile.cpp: 29d59e664ec37d99d15ca22f744e221a765ec628
  src/ObjectUtils/include/ObjectUtils/ElfFile.h: 8c9b41b6d84435a6e0db49995864aec1dc2137a1
---

This document describes what an Object File is and how to create a new one.

An Object File is {Explain what a Object File is and its role in the system}

Some examples of `ObjectFile`[<sup id="Z17acX">â†“</sup>](#f-Z17acX)s are `ElfFileImpl`[<sup id="Z1zYyq3">â†“</sup>](#f-Z1zYyq3) and `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo). Note: some of these examples inherit indirectly from `ObjectFile`[<sup id="Z17acX">â†“</sup>](#f-Z17acX).

## Inherit from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd) or `ElfFile`[<sup id="Z1pQr9x">â†“</sup>](#f-Z1pQr9x)? ðŸ¤”

Instances of `ObjectFile`[<sup id="Z17acX">â†“</sup>](#f-Z17acX) usually don't inherit from it directly. Rather, they inherit from `ElfFile`[<sup id="Z1pQr9x">â†“</sup>](#f-Z1pQr9x) when {When to inherit from ElfFile?} or from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd) when {When to inherit from CoffFile?}.

In this document we demonstrate inheriting from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd) as it is more common.

## TL;DR - How to Add a `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd)

1.  Create a new class inheriting from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd)Â  in `ðŸ“„ src/ObjectUtils/CoffFile.cpp`.
    
2.  **Profit** ðŸ’°
    

## Example Walkthrough - `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo)

We'll follow the implementation of `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo) for this example.

A `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo) is {Explain what CoffFileImpl is and how it works with the Object File interface}

<br/>

### `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo) Usage Example

For example, this is how `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo) can be used:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/ObjectUtils/CoffFile.cpp
```c++
â¬œ 53       bool has_debug_info_;
â¬œ 54     };
â¬œ 55     
ðŸŸ© 56     CoffFileImpl::CoffFileImpl(std::filesystem::path file_path,
â¬œ 57                                llvm::object::OwningBinary<llvm::object::ObjectFile>&& owning_binary)
â¬œ 58         : file_path_(std::move(file_path)),
â¬œ 59           owning_binary_(std::move(owning_binary)),
```

<br/>

## Steps to Adding a new `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd)

### 1\. Inherit from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd).

All `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd)s are defined in `ðŸ“„ src/ObjectUtils/CoffFile.cpp`.

<br/>

We first need to define our class in the relevant file, and inherit from `CoffFile`[<sup id="pnIEd">â†“</sup>](#f-pnIEd):
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/ObjectUtils/CoffFile.cpp
```c++
â¬œ 28     using orbit_grpc_protos::ModuleSymbols;
â¬œ 29     using orbit_grpc_protos::SymbolInfo;
â¬œ 30     
ðŸŸ© 31     class CoffFileImpl : public CoffFile {
â¬œ 32      public:
â¬œ 33       CoffFileImpl(std::filesystem::path file_path,
â¬œ 34                    llvm::object::OwningBinary<llvm::object::ObjectFile>&& owning_binary);
```

<br/>

> **Note**: the class name should start with "CoffFileImpl". **Note**: the class name should end with "CoffFileImpl".

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-pnIEd">CoffFile</span>[^](#pnIEd) - "src/ObjectUtils/include/ObjectUtils/CoffFile.h" L29
```c
class CoffFile : public ObjectFile {
```

<span id="f-nmjfo">CoffFileImpl</span>[^](#nmjfo) - "src/ObjectUtils/CoffFile.cpp" L31
```c++
class CoffFileImpl : public CoffFile {
```

<span id="f-Z1pQr9x">ElfFile</span>[^](#Z1pQr9x) - "src/ObjectUtils/include/ObjectUtils/ElfFile.h" L34
```c
class ElfFile : public ObjectFile {
```

<span id="f-Z1zYyq3">ElfFileImpl</span>[^](#Z1zYyq3) - "src/ObjectUtils/ElfFile.cpp" L55
```c++
class ElfFileImpl : public ElfFile {
```

<span id="f-Z17acX">ObjectFile</span>[^](#Z17acX) - "src/ObjectUtils/include/ObjectUtils/ObjectFile.h" L21
```c
class ObjectFile : public SymbolsFile {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](http://localhost:5000/repos/Z2l0aHViJTNBJTNBb3JiaXQlM0ElM0FBZGRpZUNvaGVu/docs/pes7z).