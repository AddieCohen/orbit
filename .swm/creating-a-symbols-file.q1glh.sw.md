---
id: q1glh
name: Creating a Symbols File
file_version: 1.0.2
app_version: 0.9.4-6
file_blobs:
  src/ObjectUtils/PdbFileDia.cpp: 5785189483d596c79bafc188b003cb0878a46709
  src/ObjectUtils/PdbFileDia.h: 04fcd7d57bcc9747a7add9a562b2a2b29d8115fe
  src/ObjectUtils/include/ObjectUtils/SymbolsFile.h: 279c11146785bb0e6be2c8aeddbe54fd2b46dd7a
  src/ObjectUtils/include/ObjectUtils/PdbFile.h: 8a2f3ac177b1087036c4dae0cd5e8a34218a02a2
  src/ObjectUtils/ElfFile.cpp: 29d59e664ec37d99d15ca22f744e221a765ec628
  src/ObjectUtils/CoffFile.cpp: c824b572f5e93e7795ba5d135b4b108b74c525bd
  src/ObjectUtils/PdbFileLlvm.h: 67c00f391245d0f66eb35ca08e62c7d372b5f0d4
---

In this document, we will learn how to add a new Symbols File to the system.

A Symbols File is {Explain what a Symbols File is and its role in the system}

Some examples of `SymbolsFile`[<sup id="ZypBsu">â†“</sup>](#f-ZypBsu)s are `ElfFileImpl`[<sup id="Z1zYyq3">â†“</sup>](#f-Z1zYyq3), `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu), `CoffFileImpl`[<sup id="nmjfo">â†“</sup>](#f-nmjfo), and `PdbFileLlvm`[<sup id="1egoF9">â†“</sup>](#f-1egoF9). Note: some of these examples inherit indirectly from `SymbolsFile`[<sup id="ZypBsu">â†“</sup>](#f-ZypBsu).

> **NOTE: Inherit from** `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g)
> 
> Most `SymbolsFile`[<sup id="ZypBsu">â†“</sup>](#f-ZypBsu)s inherit directly from `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g) and almost none inherit directly from `SymbolsFile`[<sup id="ZypBsu">â†“</sup>](#f-ZypBsu). In this document we demonstrate inheriting from `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g).

## TL;DR - How to Add a `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g)

1.  Create a new class inheriting from `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g)Â 
    
    *   Place the file under `ðŸ“„ src/ObjectUtils`, e.g. `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu) is defined in `ðŸ“„ src/ObjectUtils/PdbFileDia.h`.
        
2.  **Profit** ðŸ’°
    

## Example Walkthrough - `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu)

We'll follow the implementation of `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu) for this example.

A `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu) is {Explain what PdbFileDia is and how it works with the Symbols File interface}

<br/>

### `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu) Usage Example

For example, this is how `PdbFileDia`[<sup id="1BpLQu">â†“</sup>](#f-1BpLQu) can be used:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/ObjectUtils/PdbFileDia.cpp
```c++
â¬œ 19     
â¬œ 20     namespace orbit_object_utils {
â¬œ 21     
ðŸŸ© 22     PdbFileDia::PdbFileDia(std::filesystem::path file_path, const ObjectFileInfo& object_file_info)
â¬œ 23         : file_path_(std::move(file_path)), object_file_info_(object_file_info) {}
â¬œ 24     
â¬œ 25     ErrorMessageOr<CComPtr<IDiaDataSource>> PdbFileDia::CreateDiaDataSource() {
```

<br/>

## Steps to Adding a new `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g)

### 1\. Inherit from `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g).

All `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g)s are defined in files under `ðŸ“„ src/ObjectUtils`.

<br/>

We first need to define our class in the relevant file, and inherit from `PdbFile`[<sup id="1lqB3g">â†“</sup>](#f-1lqB3g):
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/ObjectUtils/PdbFileDia.h
```c
â¬œ 21     
â¬œ 22     namespace orbit_object_utils {
â¬œ 23     
ðŸŸ© 24     class PdbFileDia : public PdbFile {
â¬œ 25      public:
â¬œ 26       ErrorMessageOr<orbit_grpc_protos::ModuleSymbols> LoadDebugSymbols() override;
â¬œ 27     
```

<br/>

> **Note**: the class name should start with "PdbFile".

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-nmjfo">CoffFileImpl</span>[^](#nmjfo) - "src/ObjectUtils/CoffFile.cpp" L31
```c++
class CoffFileImpl : public CoffFile {
```

<span id="f-Z1zYyq3">ElfFileImpl</span>[^](#Z1zYyq3) - "src/ObjectUtils/ElfFile.cpp" L55
```c++
class ElfFileImpl : public ElfFile {
```

<span id="f-1lqB3g">PdbFile</span>[^](#1lqB3g) - "src/ObjectUtils/include/ObjectUtils/PdbFile.h" L17
```c
class PdbFile : public SymbolsFile {
```

<span id="f-1BpLQu">PdbFileDia</span>[^](#1BpLQu) - "src/ObjectUtils/PdbFileDia.h" L24
```c
class PdbFileDia : public PdbFile {
```

<span id="f-1egoF9">PdbFileLlvm</span>[^](#1egoF9) - "src/ObjectUtils/PdbFileLlvm.h" L34
```c
class PdbFileLlvm : public PdbFile {
```

<span id="f-ZypBsu">SymbolsFile</span>[^](#ZypBsu) - "src/ObjectUtils/include/ObjectUtils/SymbolsFile.h" L26
```c
class SymbolsFile {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](http://localhost:5000/repos/Z2l0aHViJTNBJTNBb3JiaXQlM0ElM0FBZGRpZUNvaGVu/docs/q1glh).