---
id: 82b1i
name: Creating a Metrics Uploader
file_version: 1.0.2
app_version: 0.9.4-6
file_blobs:
  src/MetricsUploader/MetricsUploaderWindows.cpp: cc4071fdbd6968c635d3fc44d42634832985361f
  src/MetricsUploader/include/MetricsUploader/MetricsUploader.h: 8e4046e4c7e4dd363dbbcdbf6e3e99b12c2913e0
  src/MetricsUploader/include/MetricsUploader/MetricsUploaderStub.h: 6e6d45f5c4a377e6b5bc7dd854d06c67a69c7bb4
  src/MetricsUploader/CaptureMetricTest.cpp: df9be44469546f50dcc33799eb8bc4df7f3a184a
  src/MetricsUploader/ScopedMetricTest.cpp: 6953a5ac41b0d0dbdf59fe17006948e6f4876f52
---

This document describes what a Metrics Uploader is and how to create a new one.

A Metrics Uploader is {Explain what a Metrics Uploader is and its role in the system}

Some examples of `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj)s are `MetricsUploaderStub`[<sup id="Z1XSDVR">â†“</sup>](#f-Z1XSDVR), `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds), `MockUploader`[<sup id="stF6O">â†“</sup>](#f-stF6O), and `MockUploader`[<sup id="Z1MuTWY">â†“</sup>](#f-Z1MuTWY).

## TL;DR - How to Add a `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj)

1.  Create a new class inheriting from `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj)Â 
    
    *   Place the file in one of the directories under `ðŸ“„ src/MetricsUploader`, e.g. `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds) is defined in `ðŸ“„ src/MetricsUploader/MetricsUploaderWindows.cpp`.
        
2.  **Profit** ðŸ’°
    

## Example Walkthrough - `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds)

We'll follow the implementation of `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds) for this example.

A `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds) is {Explain what MetricsUploaderImpl is and how it works with the Metrics Uploader interface}

<br/>

### `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds) Usage Example

For example, this is how `MetricsUploaderImpl`[<sup id="Swds">â†“</sup>](#f-Swds) can be used:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/MetricsUploader/MetricsUploaderWindows.cpp
```c++
â¬œ 54       std::string session_uuid_;
â¬œ 55     };
â¬œ 56     
ðŸŸ© 57     MetricsUploaderImpl::MetricsUploaderImpl(std::string client_name, std::string session_uuid,
â¬œ 58                                              Result (*send_log_event_addr)(const uint8_t*, int),
â¬œ 59                                              Result (*shutdown_connection_addr)(),
â¬œ 60                                              HMODULE metrics_uploader_client_dll)
```

<br/>

## Steps to Adding a new `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj)

### 1\. Inherit from `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj).

All `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj)s are defined under `ðŸ“„ src/MetricsUploader`.

<br/>

We first need to define our class in the relevant file, and inherit from `MetricsUploader`[<sup id="1it8xj">â†“</sup>](#f-1it8xj):
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/MetricsUploader/MetricsUploaderWindows.cpp
```c++
â¬œ 21     constexpr const char* kShutdownConnectionFunctionName = "ShutdownConnection";
â¬œ 22     constexpr const char* kClientLogFileSuffix = "Orbit";
â¬œ 23     
ðŸŸ© 24     class MetricsUploaderImpl : public MetricsUploader {
â¬œ 25      public:
â¬œ 26       explicit MetricsUploaderImpl(std::string client_name, std::string session_uuid,
â¬œ 27                                    Result (*send_log_event_addr)(const uint8_t*, int),
```

<br/>

> **Note**: the class name should start with "M".

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-1it8xj">MetricsUploader</span>[^](#1it8xj) - "src/MetricsUploader/include/MetricsUploader/MetricsUploader.h" L37
```c
class MetricsUploader {
```

<span id="f-Swds">MetricsUploaderImpl</span>[^](#Swds) - "src/MetricsUploader/MetricsUploaderWindows.cpp" L24
```c++
class MetricsUploaderImpl : public MetricsUploader {
```

<span id="f-Z1XSDVR">MetricsUploaderStub</span>[^](#Z1XSDVR) - "src/MetricsUploader/include/MetricsUploader/MetricsUploaderStub.h" L9
```c
class MetricsUploaderStub : public MetricsUploader {
```

<span id="f-Z1MuTWY">MockUploader</span>[^](#Z1MuTWY) - "src/MetricsUploader/ScopedMetricTest.cpp" L19
```c++
class MockUploader : public MetricsUploader {
```

<span id="f-stF6O">MockUploader</span>[^](#stF6O) - "src/MetricsUploader/CaptureMetricTest.cpp" L86
```c++
class MockUploader : public MetricsUploader {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](http://localhost:5000/repos/Z2l0aHViJTNBJTNBb3JiaXQlM0ElM0FBZGRpZUNvaGVu/docs/82b1i).